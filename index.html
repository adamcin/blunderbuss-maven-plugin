<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from target/generated-site/markdown/index.md at 2020-07-06 10:16
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200706" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Blunderbuss Maven Plugin &#x2013; Blunderbuss Maven Plugin</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
    <!-- Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37073514-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="index.html" id="bannerLeft"><h2>Blunderbuss Maven Plugin - Fire off all your cached artifacts to a remote maven repository.</h2>
</a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-07-06 10:16<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.3.0-SNAPSHOT</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://github.com/adamcin/blunderbuss-maven-plugin/wiki/frequently-asked-questions" class="externalLink" title="FAQ">FAQ</a></li>
      <li class="pull-right"><a href="https://github.com/adamcin/blunderbuss-maven-plugin/wiki" class="externalLink" title="Wiki">Wiki</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Overview</li>
    <li class="active"><a href="#"><span class="none"></span>Introduction</a></li>
    <li><a href="plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
    <li><a href="usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="apidocs/index.html" title="JavaDocs"><span class="none"></span>JavaDocs</a></li>
      <li class="nav-header">Resources @ Github</li>
    <li><a href="https://github.com/adamcin/blunderbuss-maven-plugin" class="externalLink" title="Get the Source"><span class="none"></span>Get the Source</a></li>
    <li><a href="https://github.com/adamcin/blunderbuss-maven-plugin/issues" class="externalLink" title="Report Issues"><span class="none"></span>Report Issues</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
    <ul class="nav nav-list">
    <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="dependency-info.html" title="Dependency Information"><span class="none"></span>Dependency Information</a></li>
    <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
    <li class="active"><a href="#"><span class="none"></span>About</a></li>
    <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
    <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
    <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
    <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
    <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
    <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
    <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
    </ul>
</li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org" title="Build with Maven" class="builtBy"><img class="builtBy"  alt="Build with Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Blunderbuss Maven Plugin</h1>
<p><a class="externalLink" href="https://travis-ci.org/adamcin/blunderbuss-maven-plugin"><img src="https://travis-ci.org/adamcin/blunderbuss-maven-plugin.png" alt="Build Status" /></a> <a class="externalLink" href="https://coveralls.io/github/adamcin/blunderbuss-maven-plugin?branch=master"><img src="https://coveralls.io/repos/github/adamcin/blunderbuss-maven-plugin/badge.svg?branch=master" alt="Coverage Status" /></a> <a class="externalLink" href="https://search.maven.org/search?q=g:%22net.adamcin%22%20AND%20a:%22blunderbuss-maven-plugin%22"><img src="https://img.shields.io/maven-central/v/net.adamcin/blunderbuss-maven-plugin.svg?label=Maven%20Central" alt="Maven Central" /></a></p>
<div class="section">
<h2><a name="About_Blunderbuss"></a>About Blunderbuss</h2>
<p>With the proliferation of low-feature cheap maven artifact repositories for cloud vendors that only support proxy to maven-central and lack advanced repo index services, we need a way to reliably maintain mirrors using an imperative incremental method like rsync.</p>
<p>This plugin is not intended to completely replace full-featured reverse proxy maven artifact repositories like Nexus or Artifactory, or cloud artifact repositories with premium upstream proxy features like JFrog. Instead, it&#x2019;s intended to avoid having to scale up an off-the-shelf OSS Nexus repository or to pay more for a third-party cloud repository to meet the scalability of hosted maven CI pipelines executed by Azure Pipelines, AWS CodeCommit, and GitHub Actions, by incrementally syncing all the resolved build dependencies to whatever feature-limited cloud artifact publishing product is most conveniently available, such as Azure Artifact Feeds, AWS CodeArtifact, or GitHub Packages.</p>
<p>What are the limitations that blunderbuss solves?</p>
<ul>

<li>

<p><i>A cloud-hosted maven artifact store can&#x2019;t use a third-party repository (other than Maven Central) as an upstream proxy target.</i> Blunderbuss is a client-side artifact sync tool, so if you can fully build a project once in some context with access to all the third-party upstream repositories, so that all implicit, transitive, and profile-sensitive dependencies are resolved to a local maven repository folder, you can subsequently run the Blunderbuss <tt>sync</tt> goal to publish all those resolved dependencies to convenient store.</p>
</li>
<li>

<p><i>A cloud-hosted maven artifact store won&#x2019;t provide standard index metadata for all present artifacts.</i> Nexus and Maven Central have standardized repository-wide index APIs in one form or another that might support incremental diff calculation, but the cloud-hosted repository options don&#x2019;t have support for those index APIs, so artifact discovery from index metadata or by traversal of the default maven layout by scraping directory index.html files is not possible, with the only alternative being to glue something together using a proprietary SDK or CLI. Blunderbuss maintains its own simple index format in a <tt>jar</tt> package that follows the most basic Maven artifact rules.</p>
</li>
<li>

<p><i>Generic <tt>curl</tt>-based and <tt>mvn deploy</tt>-based solutions are not optimized for an UPSERT approach that retains native handling of Maven Metadata.</i> <tt>mvn deploy</tt> doesn&#x2019;t like UPSERTS at all, and implementing all the necessary XML merging steps for updating <tt>maven-metadata.xml</tt> file on upload in a <tt>curl</tt> glue script would be a maintenance nightmare as well. Blunderbuss uses native Maven repository APIs as much as possible to remain a useful and portable tool in the long-term, while deviating in the right places to implement the UPSERT behavior needed for an efficient rsync-like approach.</p>
</li>
</ul>
<p>This tool is best used when you can guarantee your local maven repository is as clean as you want the target artifact repo to be. This is not generally the situation for most developers running maven on their personal machines, who use the same maven cache for all projects without regularly cleaning it. For use on personal machines, it is important to start with a clean local cache when preparing to use Blunderbuss to avoid leaking licensed/proprietary artifacts to the remote repository. In a CI build agent environment, on the other hand, the local maven cache is usually discarded after every build, so this is less of risk.</p></div>
<div class="section">
<h2><a name="Usage"></a>Usage</h2>
<div class="section">
<h3><a name="Pure_CLI_Approach"></a>Pure CLI Approach</h3>
<p>First, be sure that your maven settings.xml is properly configured to authenticate with the target repository and that your local maven repository is as clean as you want the target repository to be. Then you can execute the plugin directly:</p>

<div>
<div>
<pre class="source">mvn net.adamcin:blunderbuss-maven-plugin:0.3.0:sync \
    -DindexGroupId=com.myorg1.ado \
    -DindexArtifactId=my-index \
    -DaltDeploymentRepository=MyFeedInOrg1::https://pkgs.dev.azure.com/OrganzationName/ProjectName/_packaging/MyProjectScopedFeed1/Maven/v1
</pre></div></div>
</div>
<div class="section">
<h3><a name="Executing_in_a_Maven_Module_Directory"></a>Executing in a Maven Module Directory</h3>
<p>You can also configure the blunderbuss plugin in a module pom&#x2019;s <tt>pluginManagement</tt> section, so that these details don&#x2019;t need to be repeated as CLI arguments when you run the <tt>sync</tt> goal in the same module directory.</p>
<p>For example, after adding the following to your pom, it configures the plugin with the same details in the earlier CLI-only example:</p>

<div>
<div>
<pre class="source">&lt;pluginManagement&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;net.adamcin&lt;/groupId&gt;
            &lt;artifactId&gt;blunderbuss-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;0.3.0&lt;/version&gt;
            &lt;configuration&gt;
                &lt;indexGroupId&gt;com.myorg1.ado&lt;/indexGroupId&gt;
                &lt;indexArtifactId&gt;my-index&lt;/indexArtifactId&gt;
                &lt;altDeploymentRepository&gt;MyFeedInOrg1::https://pkgs.dev.azure.com/OrganzationName/ProjectName/_packaging/MyProjectScopedFeed1/Maven/v1&lt;/altDeploymentRepository&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/pluginManagement&gt;
</pre></div></div>

<p>This allows you to run a much simpler command:</p>

<div>
<div>
<pre class="source">mvn net.adamcin:blunderbuss-maven-plugin:sync
</pre></div></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2020.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>